{"version":3,"sources":["dist/index.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","isEmpty","obj","Map","Set","size","key","defineProperty","exports","WrapRequestStream","wrapRequest","WrapRequest","__wrapRequest__","__wrapRequestDebug__","let","cache","wrapRequests","UNHANDLED_ERROR_WARNING","UNHANDLED_ERROR_WARNING_TIMEOUT","clear","contents","constructor","req","options","enumerable","configurable","writable","cacheData","getCachedData","requestParams","_$","defaultData","push","getCacheKey","params","cacheKey","JSON","stringify","checkXhrVersion","version","stateLoading","xhrVersion","request","_c","_a","throwError","_b","__ignoreXhrVersion__","ignoreCache","undefined","setFetched","internalError","metadata","_metadata","state","transform","xhr","assign","context","yield","error","clearInternalErrorAccess","$","internalErrorAccess","clearTimeout","setTimeout","console","warn","_e","_d","parent","_f","source","loading","fetched","empty","match","handlers","default","reset","didFetch","cb","when","pipe","restOptions","newDefaultData","wr","propBlackList","keys","forEach","rawKey","includes","get","set","newVal","disposeCache","super","val","invokeUpdate","invokeResolve","on","type","listener","listeners","filter","l","stream"],"mappings":"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"}