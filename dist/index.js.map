{"version":3,"sources":["dist/index.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__rest","s","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","isEmpty","obj","Map","Set","size","key","defineProperty","exports","WrapRequestStream","wrapRequest","WrapRequest","__wrapRequest__","__wrapRequestDebug__","let","cache","wrapRequests","clear","contents","constructor","req","options","enumerable","configurable","writable","cacheData","getCachedData","requestParams","_$","defaultData","push","getCacheKey","params","cacheKey","JSON","stringify","checkXhrVersion","version","stateLoading","xhrVersion","request","_c","_a","throwError","_b","__ignoreXhrVersion__","ignoreCache","undefined","setFetched","error","metadata","_metadata","state","transform","xhr","assign","context","yield","$","parent","source","loading","fetched","empty","match","handlers","default","reset","didFetch","cb","when","setTimeout","pipe","restOptions","wr","propBlackList","keys","forEach","rawKey","includes","get","set","newVal","disposeCache","super","val","invokeUpdate","invokeResolve","on","type","listener","listeners","filter","l","stream"],"mappings":"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"}